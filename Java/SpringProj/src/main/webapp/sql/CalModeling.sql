
/* Drop Tables */

DROP TABLE SCRAP CASCADE CONSTRAINTS;
DROP TABLE PURCHASE CASCADE CONSTRAINTS;
DROP TABLE CAR CASCADE CONSTRAINTS;
DROP TABLE CUSTOMER CASCADE CONSTRAINTS;




/* Create Tables */

CREATE TABLE CAR
(
	CAR_CODE char(4) NOT NULL,
	CAR_NAME nvarchar2(10) NOT NULL,
	CAR_TYPE varchar2(10) NOT NULL,
	PRIMARY KEY (CAR_CODE)
);


CREATE TABLE CUSTOMER
(
	ID varchar2(10) NOT NULL,
	NAME nvarchar2(10) NOT NULL,
	PRIMARY KEY (ID)
);


CREATE TABLE PURCHASE
(
	PUR_NO number NOT NULL,
	PUR_DATE date DEFAULT SYSDATE,
	ID varchar2(10) NOT NULL,
	CAR_CODE char(4) NOT NULL,
	PRIMARY KEY (PUR_NO)
);


CREATE TABLE SCRAP
(
	SC_DATE date DEFAULT SYSDATE,
	PUR_NO number NOT NULL
);



/* Create Foreign Keys */

ALTER TABLE PURCHASE
	ADD FOREIGN KEY (CAR_CODE)
	REFERENCES CAR (CAR_CODE)
;


ALTER TABLE PURCHASE
	ADD FOREIGN KEY (ID)
	REFERENCES CUSTOMER (ID)
;


ALTER TABLE SCRAP
	ADD FOREIGN KEY (PUR_NO)
	REFERENCES PURCHASE (PUR_NO)
;

CREATE SEQUENCE SEQ_PURCHASE
NOCACHE
NOCYCLE;


